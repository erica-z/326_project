{% extends "navbar.html" %}

{% block content %}

{% load staticfiles %}
<style>
#map {
  height: 95%;
}
html, body {
  height: 95%;
  margin: 0;
  padding: 0;
}
</style>

<div id="map"></div>
<script>
  var map, infoWindow, infoWindow1;
  function initMap() {
    map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 42.408387, lng: -72.539822},
      zoom: 6
    });
    infoWindow = new google.maps.InfoWindow;
    infoWindow1 = new google.maps.InfoWindow;
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        var pos = {
          lat: position.coords.latitude,
          lng: position.coords.longitude
        };
      infoWindow.setPosition({lat: 44.934695, lng: -69.958306});
      infoWindow.setContent("<div style='float:left'><img src='dog.jpg'><div style='float:right; padding: 10px;'><b>Dave's Dog Party!</b><br/>123 Street<br/> City, 01010</div>");
      infoWindow1.setPosition({lat: 43.357197, lng: -74.959811});
      infoWindow1.setContent("<div style='float:left'><img src='cat.jpg'><div style='float:right; padding: 10px;'><b>Cathy's Cat Compendium!</b><br/>100 Street<br/> City, 02090</div>");
      var marker = new google.maps.Marker({position: pos, map: map});
      infoWindow.open(map);
      infoWindow1.open(map);
      map.setCenter(pos);
      }, function() {
        handleLocationError(true, infoWindow, map.getCenter());
      });
    } else {
      handleLocationError(false, infoWindow, map.getCenter());
    }
  }
  function handleLocationError(browserHasGeolocation, infoWindow, pos) {
    infoWindow.setPosition(pos);
    infoWindow.open(map);
  }
</script>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=API_KEY_HERE&callback=initMap"></script>

<div class="container">
  <table class ="table">
    <thead>
      <tr>
        <th>Owner Name</th>
        <th>Pet</th>
        <th>Location</th>
        <th>Date Time</th>
        <th>Capacity</th>
        <th>Duration</th>
      </tr>
    </thead>
    <tbody>
      {% if events %}
        {% for event in events %}
          <tr>
          <td>{{ event.pet_owner }}</td>
          <td>{{ event.pet }}</td>
          <td>{{ event.location }}</td>
          <td>{{ event.datetime }}</td>
          <td>{{ event.capacity }}</td>
          <td>{{ event.duration }}</td>
          </tr>
        {% endfor %}
      {% else %}
      <p>There are no events available.</p>
      {% endif %}
    </tbody>
  </table>
</div>

{% endblock %}
